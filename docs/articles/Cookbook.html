<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Cookbook • GGIR</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Cookbook">
<script defer data-domain="pkgdown.r-lib.org,all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">GGIR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">3.2-12</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-the-book" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">The book</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-the-book">
<li><a class="dropdown-item" href="../articles/chapter1_WhatIsGGIR.html">1. What is GGIR</a></li>
    <li><a class="dropdown-item" href="../articles/chapter2_Pipeline.html">2. The GGIR Pipeline</a></li>
    <li><a class="dropdown-item" href="../articles/chapter3_QualityAssessment.html">3. Data Quality Assurance</a></li>
    <li><a class="dropdown-item" href="../articles/chapter4_AccMetrics.html">4. From Raw Data to Acceleration Metrics</a></li>
    <li><a class="dropdown-item" href="../articles/chapter5_StudyProtocol.html">5. Accounting for Study Protocol</a></li>
    <li><a class="dropdown-item" href="../articles/chapter6_DataImputation.html">6. How GGIR Deals with Invalid Data</a></li>
    <li><a class="dropdown-item" href="../articles/chapter7_DescribingDataWithoutKnowingSleep.html">7. Describing the Data Without Knowing Sleep</a></li>
    <li><a class="dropdown-item" href="../articles/chapter8_SleepFundamentalsSibs.html">8. Sleep Fundamentals - Sustained Inactivity Bout Detection (SIB)</a></li>
    <li><a class="dropdown-item" href="../articles/chapter9_SleepFundamentalsGuiders.html">9. Sleep Fundamentals - Guiding Sleep Detection</a></li>
    <li><a class="dropdown-item" href="../articles/chapter10_SleepAnalysis.html">10. Sleep Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/chapter11_DescribingDataCutPoints.html">11. Physical Activity Fundamentals - Describing the data with cut-points</a></li>
    <li><a class="dropdown-item" href="../articles/chapter12_TimeUseAnalysis.html">12. Time-Use Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/chapter13_CircadianRhythm.html">13. Circadian Rhythm Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/chapter14_BehaviouralFragmentation.html">14. Behavioural Fragmentation</a></li>
  </ul>
</li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-annexes" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Annexes</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-annexes">
<li><a class="dropdown-item" href="../articles/GGIRParameters.html">GGIR Parameters</a></li>
    <li><a class="dropdown-item" href="../articles/GGIRoutput.html">GGIR Output</a></li>
    <li><a class="dropdown-item" href="../articles/readmyacccsv.html">Reading csv files with raw data</a></li>
    <li><a class="dropdown-item" href="../articles/ExternalFunction.html">Embedding external functions in GGIR</a></li>
    <li><a class="dropdown-item" href="../articles/CutPoints.html">Published cut-points and how to use them</a></li>
    <li><a class="dropdown-item" href="../articles/TutorialDaySegmentAnalyses.html">Day-segment analyses</a></li>
    <li><a class="dropdown-item" href="../articles/HouseHoldCoanalysis.html">Household co-analysis</a></li>
    <li><a class="dropdown-item" href="../articles/Cookbook.html">Cookbook</a></li>
    <li><a class="dropdown-item" href="../articles/DateTimeFormatsInR.html">Date and Time formats in R</a></li>
    <li><a class="dropdown-item" href="../articles/SleepRegularityIndex.html">Sleep Regularity Index</a></li>
    <li><a class="dropdown-item" href="../articles/NapDetection.html">Nap Detection</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../articles/chapter0_Installation.html">Installation</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/chapter0_GetStarted.html">Get started</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news">
<li><h6 class="dropdown-header" data-toc-skip>Releases</h6></li>
    <li><a class="external-link dropdown-item" href="https://www.accelting.com/ggir-release-3-2-0/">Version 3.2-0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.accelting.com/ggir-release-3-1-5/">Version 3.1-5</a></li>
    <li><a class="external-link dropdown-item" href="https://www.accelting.com/ggir-release-3-1-0/">Version 3.1-0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.accelting.com/ggir-release-3-0-0/">Version 3.0-0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.accelting.com/ggir-release-2-9-0/">Version 2.9-0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.accelting.com/ggir-release-2-8-0/">Version 2.8-0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.accelting.com/ggir-release-2-7-1/">Version 2.7-1</a></li>
    <li><a class="external-link dropdown-item" href="https://www.accelting.com/ggir-release-2-6-0/">Version 2.6-0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.accelting.com/ggir-release-2-5-0/">Version 2.5-0</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../articles/chapter0_Contributing.html">Contributing</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/chapter0_Support.html">Need help?</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/wadpac/GGIR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Cookbook</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/wadpac/GGIR/blob/HEAD/vignettes/Cookbook.Rmd" class="external-link"><code>vignettes/Cookbook.Rmd</code></a></small>
      <div class="d-none name"><code>Cookbook.Rmd</code></div>
    </div>

    
    
<p>In this cook book you will find recipes for using GGIR in specific
non-default scenarios.</p>
<div class="section level2">
<h2 id="handling-externally-derived-epoch-data">Handling externally derived epoch data<a class="anchor" aria-label="anchor" href="#handling-externally-derived-epoch-data"></a>
</h2>
<p>This refers to the situation where external software or hardware was
used to derive epoch level aggregates from accelerometer data.</p>
<p>In <a href="https://wadpac.github.io/GGIR/articles/chapter2_Pipeline.html#externally-derived-epoch-level-data">Chapter
2</a> we provide an overview of all brands and data formats
facilitated.</p>
<p>In this section you will find key parameters needed for working with
these data formats. Please refer to the other parts of the <a href="https://wadpac.github.io/GGIR/">GGIR documentation</a> for
guidance on how to tailor the rest of your analysis towards your study
protocol and research interests.</p>
<p>Please be aware the date-time formats may be country specific. So,
when working with externally derived epoch data always check that
parameter <code>extEpochData_timeformat</code> setting is correct for
the data you are processing. You can do this by opening one of the files
in notepad or eclipse. See <a href="https://wadpac.github.io/GGIR/articles/DateTimeFormatsInR.html">our
Annex page</a> for guidance on how to specify date and time formats in
R.</p>
<div class="section level3">
<h3 id="actiwatch-data">Actiwatch data<a class="anchor" aria-label="anchor" href="#actiwatch-data"></a>
</h3>
<p>This includes the Actiwatch Spectrum Plus and Actiwatch 2 (AW2) as
sold by Philips Respironics (previously Mini Mitter) and the MotionWatch
as sold by CamNTech.</p>
<div class="section level4">
<h4 id="in--awd-format">in .AWD format<a class="anchor" aria-label="anchor" href="#in--awd-format"></a>
</h4>
<p>This is a text file saved with .AWD extension. An example of how the
first couple of hundred lines of an .AWD file may look like can be found
<a href="https://github.com/wadpac/GGIRread/blob/main/inst/testfiles/Actiwatch.AWD" class="external-link">here</a>.</p>
<pre><code><span><span class="fu"><a href="../reference/GGIR.html">GGIR</a></span><span class="op">(</span>datadir <span class="op">=</span> <span class="st">"/media/actiwatch_awd"</span>, <span class="co"># folder with epoch level .AWD file</span></span>
<span>  outputdir <span class="op">=</span> <span class="st">"/media/myoutput"</span>,</span>
<span>  dataFormat <span class="op">=</span> <span class="st">"actiwatch_awd"</span>,</span>
<span>  extEpochData_timeformat <span class="op">=</span> <span class="st">"%d-%b-%Y %H:%M:%S"</span>,</span>
<span>  windowsizes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">60</span>, <span class="fl">900</span>, <span class="fl">3600</span><span class="op">)</span>, <span class="co"># 60 is the expected epoch length</span></span>
<span>  acc.metric <span class="op">=</span> <span class="st">"ExtAct"</span><span class="op">)</span></span></code></pre>
<p>To classify sleep from Actiwatch, consider parameter
<code>HASIB.algo = "Oakley1997"</code>.</p>
</div>
<div class="section level4">
<h4 id="in--csv-format">in .CSV format<a class="anchor" aria-label="anchor" href="#in--csv-format"></a>
</h4>
<p>An example of how the first couple of hundred lines of this file may
look like can be found <a href="https://github.com/wadpac/GGIRread/blob/main/inst/testfiles/Actiwatch.csv" class="external-link">here</a>.
Note that the example file is in Dutch but it should also work for files
in English.</p>
<pre><code><span><span class="fu"><a href="../reference/GGIR.html">GGIR</a></span><span class="op">(</span>datadir <span class="op">=</span> <span class="st">"/media/actiwatch_csv"</span>, <span class="co"># folder with epoch level .AWD file</span></span>
<span>  outputdir <span class="op">=</span> <span class="st">"/media/myoutput"</span>,</span>
<span>  dataFormat <span class="op">=</span> <span class="st">"actiwatch_csv"</span>,</span>
<span>  extEpochData_timeformat <span class="op">=</span> <span class="st">"%m/%d/%y %I:%M:%S %p"</span>,</span>
<span>  windowsizes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">15</span>, <span class="fl">900</span>, <span class="fl">3600</span><span class="op">)</span>,</span>
<span>  acc.metric <span class="op">=</span> <span class="st">"ExtAct"</span><span class="op">)</span></span></code></pre>
<p>To classify sleep from Actical, consider parameter
<code>HASIB.algo = "Oakley1997"</code>.</p>
</div>
</div>
<div class="section level3">
<h3 id="uk-biobank-data-in--csv-format">UK Biobank data in .CSV format<a class="anchor" aria-label="anchor" href="#uk-biobank-data-in--csv-format"></a>
</h3>
<p>This is only applicable the UK Biobank 5 second epoch csv exports and
NOT to the raw accelerometer data (multiple values per second). Please
see <a href="https://wadpac.github.io/GGIR/" class="uri">https://wadpac.github.io/GGIR/</a> for all documentation on
processing raw accelerometer data.</p>
<pre><code><span><span class="fu"><a href="../reference/GGIR.html">GGIR</a></span><span class="op">(</span>datadir <span class="op">=</span> <span class="st">"/media/ukbiobank"</span>,</span>
<span>   outputdir <span class="op">=</span> <span class="st">"/media/myoutput"</span>,</span>
<span>   dataFormat <span class="op">=</span> <span class="st">"ukbiobank_csv"</span>,</span>
<span>   extEpochData_timeformat <span class="op">=</span> <span class="st">"%m/%d/%Y %H:%M:%S"</span>,</span>
<span>   windowsizes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">900</span>, <span class="fl">3600</span><span class="op">)</span>, <span class="co"># We know that data was stored in 5 second epoch</span></span>
<span>   desiredtz <span class="op">=</span> <span class="st">"Europe/London"</span>, <span class="co"># We know that data was collected in the UK</span></span>
<span>   acc.metric <span class="op">=</span> <span class="st">"LFENMO"</span><span class="op">)</span></span></code></pre>
<p>Please note that currently no method exists in GGIR to detect sleep
from these 5 second aggregate files.</p>
</div>
<div class="section level3">
<h3 id="actigraph-count-data-in--csv-format">ActiGraph count data in .CSV format<a class="anchor" aria-label="anchor" href="#actigraph-count-data-in--csv-format"></a>
</h3>
<p>Examples of how the first couple of hundred lines of these files may
look like can be found <a href="https://github.com/wadpac/GGIRread/blob/main/inst/testfiles/ActiGraph13.csv" class="external-link">here</a>,
<a href="https://github.com/wadpac/GGIRread/blob/main/inst/testfiles/ActiGraph13_timestamps_headers.csv" class="external-link">here</a>,
and <a href="https://github.com/wadpac/GGIRread/blob/main/inst/testfiles/ActiGraph61.csv" class="external-link">here</a>.</p>
<pre><code><span><span class="fu"><a href="../reference/GGIR.html">GGIR</a></span><span class="op">(</span>datadir <span class="op">=</span> <span class="st">"/examplefiles"</span>,</span>
<span>   outputdir <span class="op">=</span> <span class="st">""</span>,</span>
<span>   dataFormat <span class="op">=</span> <span class="st">"actigraph_csv"</span>,</span>
<span>   extEpochData_timeformat <span class="op">=</span> <span class="st">"%m/%d/%Y %H:%M:%S"</span>,</span>
<span>   windowsizes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">900</span>, <span class="fl">3600</span><span class="op">)</span>,</span>
<span>   do.neishabouricounts <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>   acc.metric <span class="op">=</span> <span class="st">"NeishabouriCount_x"</span>,</span>
<span>   threshold.in <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fl">100</span> <span class="op">*</span> <span class="op">(</span><span class="fl">5</span><span class="op">/</span><span class="fl">60</span><span class="op">)</span>, digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>,</span>
<span>   threshold.mod <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fl">2500</span> <span class="op">*</span> <span class="op">(</span><span class="fl">5</span><span class="op">/</span><span class="fl">60</span><span class="op">)</span>, digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>,</span>
<span>   threshold.vig <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fl">10000</span> <span class="op">*</span> <span class="op">(</span><span class="fl">5</span><span class="op">/</span><span class="fl">60</span><span class="op">)</span>, digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></code></pre>
<p>Please note that GGIR’s default sleep detection does nto work for
ActiGraph coutns. See <a href="https://wadpac.github.io/GGIR/articles/chapter8_SleepFundamentalsSibs.html">chapter
8</a>, <a href="https://wadpac.github.io/GGIR/articles/chapter9_SleepFundamentalsGuiders.html">chapter
9</a>, and <a href="https://wadpac.github.io/GGIR/articles/chapter10_SleepAnalysis.html">chapter
10</a> for guidance on configuring GGIR’s sleep detection.</p>
</div>
<div class="section level3">
<h3 id="sensewear-data-in--xls-format">Sensewear data in .xls format<a class="anchor" aria-label="anchor" href="#sensewear-data-in--xls-format"></a>
</h3>
<p>Sensewear comes in xls(x) files with many column from which GGIR only
uses: “METs” as indicator for acceleration where the uses can use MET
levels as acceleration threshold, “Step Counter” which is treated as
externally generated step count, and “Sleep” which is used as
classification for sleep.</p>
<p>At a bare minimum the GGIR command to process these files looks as
follows:</p>
<pre><code><span><span class="fu"><a href="../reference/GGIR.html">GGIR</a></span><span class="op">(</span>datadir <span class="op">=</span> <span class="st">"C:/yoursenseweardatafolder"</span>,</span>
<span>    outputdir <span class="op">=</span> <span class="st">"D:/youroutputfolder"</span>,</span>
<span>    dataFormat <span class="op">=</span> <span class="st">"sensewear_xls"</span>,</span>
<span>    extEpochData_timeformat <span class="op">=</span> <span class="st">"%d-%b-%Y %H:%M:%S"</span>,</span>
<span>    windowsizes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">60</span>, <span class="fl">900</span>, <span class="fl">3600</span><span class="op">)</span>,</span>
<span>    acc.metric <span class="op">=</span> <span class="st">"ExtAct"</span>,</span>
<span>    threshold.in <span class="op">=</span> <span class="fl">1.5</span>,</span>
<span>    threshold.mod <span class="op">=</span> <span class="fl">3</span>,</span>
<span>    threshold.vig <span class="op">=</span> <span class="fl">6</span><span class="op">)</span></span></code></pre>
<p>To use the sleep classification as stored inside the data use
parameter <code>HASIB.algo = "data"</code>.</p>
</div>
<div class="section level3">
<h3 id="actical-in--csv-format">Actical in .csv format<a class="anchor" aria-label="anchor" href="#actical-in--csv-format"></a>
</h3>
<p>The Actical was sold by Philips Respironics (previously Mini
Mitter).</p>
<p>An example of how the first couple of hundred lines of this file may
look like can be found <a href="https://github.com/wadpac/GGIRread/blob/main/inst/testfiles/Actical.csv" class="external-link">here</a></p>
<p>At a bare minimum the GGIR command to process these files looks as
follows:</p>
<pre><code><span><span class="fu"><a href="../reference/GGIR.html">GGIR</a></span><span class="op">(</span>datadir <span class="op">=</span> <span class="st">"C:/youracticaldatafolder"</span>,</span>
<span>    outputdir <span class="op">=</span> <span class="st">"D:/youroutputfolder"</span>,</span>
<span>    dataFormat <span class="op">=</span> <span class="st">"actical_csv"</span>,</span>
<span>    extEpochData_timeformat <span class="op">=</span> <span class="st">"%d-%b-%Y %H:%M"</span>,</span>
<span>    windowsizes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">60</span>, <span class="fl">900</span>, <span class="fl">3600</span><span class="op">)</span>,</span>
<span>    acc.metric <span class="op">=</span> <span class="st">"ExtAct"</span><span class="op">)</span></span></code></pre>
<p>To classify sleep from Actical, consider parameter
<code>HASIB.algo = "Oakley1997"</code>.</p>
</div>
<div class="section level3">
<h3 id="philips-health-band-in--xlsx-format">Philips Health Band in .xlsx format<a class="anchor" aria-label="anchor" href="#philips-health-band-in--xlsx-format"></a>
</h3>
<p>The Philips Health Band was sold by Philips Respironics (previously
Mini Mitter).</p>
<p>The Philips Health Band data comes with .xlsx file pairs per
recording. One starts with <code>DataList</code> the other one starts
with <code>Sleep_Wake_</code>. Examples of how the first couple of
hundred lines of such files may look like can be found <a href="https://github.com/wadpac/GGIRread/blob/main/inst/testfiles/DataList_AH1234567890_PhilipsHealthBand.xlsx" class="external-link">here</a>
for <code>DataList</code> and <a href="https://github.com/wadpac/GGIRread/blob/main/inst/testfiles/Sleep_Wake_AH1234567890_PhilipsHealthBand.xlsx" class="external-link">here</a>
for <code>Sleep_Wake</code>.</p>
<p>At a bare minimum the GGIR command to process these files looks as
follows:</p>
<pre><code><span><span class="fu"><a href="../reference/GGIR.html">GGIR</a></span><span class="op">(</span>datadir <span class="op">=</span> <span class="st">"C:/yourphbdatafolder"</span>,</span>
<span>    outputdir <span class="op">=</span> <span class="st">"D:/youroutputfolder"</span>,</span>
<span>    dataFormat <span class="op">=</span> <span class="st">"phb_xlsx"</span>,</span>
<span>    extEpochData_timeformat <span class="op">=</span> <span class="st">"%m-%d-%Y %H:%M:%S"</span>,</span>
<span>    windowsizes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">60</span>, <span class="fl">900</span>, <span class="fl">3600</span><span class="op">)</span>,</span>
<span>    acc.metric <span class="op">=</span> <span class="st">"ExtAct"</span><span class="op">)</span></span></code></pre>
<p>When <code>HASIB.algo = "data"</code> GGIR attempts to extract and
uses the sleep classification that is stored inside the xlsx files with
column name “sleepWake”. If no sleep classification is stored inside the
data, GGIR uses the activity indicator as stored as “activitycounts”.
You can specify <code>HASIB.algo = c("data", "Oakley1997")</code> to
make GGIR fall back on Oakley1997 if this would be the case.</p>
</div>
<div class="section level3">
<h3 id="fitbit-as-folder-with--json-format-files">Fitbit as folder with .json format files<a class="anchor" aria-label="anchor" href="#fitbit-as-folder-with--json-format-files"></a>
</h3>
<p>Note: We have only tested this for the FitBit Inspire 3 model. We do
not know whether other versions of the Fitbit watch allow for data to be
exported in a similar format. Please let us know if you are able to test
this.</p>
<p>FitBit Inspire 3 data comes with multiple .json file per recording
(individual) stored in the same folder, with one folder for each
recording.</p>
<p>GGIR uses the .json file names starting with sleep, calories, and
steps for sleep, magnitude of movement, and steps, respectively.</p>
<p>Examples of how these files may look like can be found <a href="https://github.com/wadpac/GGIRread/blob/main/inst/testfiles/sleep-1995-06-23_Fitbit.json" class="external-link">here
for sleep</a>, [here for steps](<a href="https://github.com/wadpac/GGIRread/blob/main/inst/testfiles/steps-1995-06-23_Fitbit.json" class="external-link uri">https://github.com/wadpac/GGIRread/blob/main/inst/testfiles/steps-1995-06-23_Fitbit.json</a>,
and <a href="https://github.com/wadpac/GGIRread/blob/main/inst/testfiles/calories-1995-06-23_Fitbit.json" class="external-link">here
for calories</a>.</p>
<p>At a bare minimum the GGIR command to process these files looks as
follows:</p>
<pre><code><span><span class="fu"><a href="../reference/GGIR.html">GGIR</a></span><span class="op">(</span>datadir <span class="op">=</span> <span class="st">"C:/yourfitbitdatafolder"</span>,</span>
<span>    outputdir <span class="op">=</span> <span class="st">"D:/youroutputfolder"</span>,</span>
<span>    dataFormat <span class="op">=</span> <span class="st">"fitbit_json"</span>,</span>
<span>    windowsizes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">60</span>, <span class="fl">900</span>, <span class="fl">3600</span><span class="op">)</span>,</span>
<span>    acc.metric <span class="op">=</span> <span class="st">"ExtAct"</span><span class="op">)</span></span></code></pre>
<p>Note that parameter <code>extEpochData_timeformat</code> is not
expected for Fitbit as we assume that the timestamps are always stored
with the same internal format inside the .json files.</p>
<p>To use the sleep classification as stored inside the data use
parameter <code>HASIB.algo = "data"</code>.</p>
</div>
</div>
<div class="section level2">
<h2 id="handling-study-protocol">Handling study protocol<a class="anchor" aria-label="anchor" href="#handling-study-protocol"></a>
</h2>
<div class="section level3">
<h3 id="not-worn-during-night">Not worn during night<a class="anchor" aria-label="anchor" href="#not-worn-during-night"></a>
</h3>
<p>Data type: Any Study protocol: Worn during the day, taken off during
the night Wear location: Any</p>
<pre><code><span><span class="fu"><a href="../reference/GGIR.html">GGIR</a></span><span class="op">(</span>HASPT.algo <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"NotWorn"</span>, <span class="st">"HDCZA"</span><span class="op">)</span>,</span>
<span>    HASIB.algo <span class="op">=</span> <span class="st">"vanHees2015"</span>,</span>
<span>    do.imp <span class="op">=</span> <span class="cn">FALSE</span>, <span class="co"># Do not impute nonwear because sensor was never worn 24/7</span></span>
<span>    HASPT.ignore.invalid <span class="op">=</span> <span class="cn">NA</span>, <span class="co"># Treat nonwear as potential part of guider window</span></span>
<span>    ignorenonwear <span class="op">=</span> <span class="cn">FALSE</span>, <span class="co"># Consider nonwear as potential sleep</span></span>
<span>    includenightcrit <span class="op">=</span> <span class="fl">8</span>,</span>
<span>    includedaycrit <span class="op">=</span> <span class="fl">8</span><span class="op">)</span></span></code></pre>
<p>If “NotWorn” is specified then a second guider can be supplied to the
same parameter as shown above. This second guider will be used if the
accelerometer is worn for more than 75 percent of the night. The example
above shows this for HDCZA.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Vincent T van Hees, Jairo H Migueles, Medical Research Council UK, Accelting, French National Research Agency.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
