<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>8. Sleep Fundamentals: Sustained Inactivity Bout Detection (SIB) • GGIR</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="8. Sleep Fundamentals: Sustained Inactivity Bout Detection (SIB)">
<script defer data-domain="pkgdown.r-lib.org,all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">GGIR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">3.2-5</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-the-book" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">The book</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-the-book">
<li><a class="dropdown-item" href="../articles/chapter1_WhatIsGGIR.html">1. What is GGIR</a></li>
    <li><a class="dropdown-item" href="../articles/chapter2_Pipeline.html">2. The GGIR Pipeline</a></li>
    <li><a class="dropdown-item" href="../articles/chapter3_QualityAssessment.html">3. Data Quality Assurance</a></li>
    <li><a class="dropdown-item" href="../articles/chapter4_AccMetrics.html">4. From Raw Data to Acceleration Metrics</a></li>
    <li><a class="dropdown-item" href="../articles/chapter5_StudyProtocol.html">5. Accounting for Study Protocol</a></li>
    <li><a class="dropdown-item" href="../articles/chapter6_DataImputation.html">6. How GGIR Deals with Invalid Data</a></li>
    <li><a class="dropdown-item" href="../articles/chapter7_DescribingDataWithoutKnowingSleep.html">7. Describing the Data Without Knowing Sleep</a></li>
    <li><a class="dropdown-item" href="../articles/chapter8_SleepFundamentalsSibs.html">8. Sleep Fundamentals - Sustained Inactivity Bout Detection (SIB)</a></li>
    <li><a class="dropdown-item" href="../articles/chapter9_SleepFundamentalsGuiders.html">9. Sleep Fundamentals - Guiding Sleep Detection</a></li>
    <li><a class="dropdown-item" href="../articles/chapter10_SleepAnalysis.html">10. Sleep Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/chapter11_DescribingDataCutPoints.html">11. Physical Activity Fundamentals - Describing the data with cut-points</a></li>
    <li><a class="dropdown-item" href="../articles/chapter12_TimeUseAnalysis.html">12. Time-Use Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/chapter13_CircadianRhythm.html">13. Circadian Rhythm Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/chapter14_BehaviouralFragmentation.html">14. Behavioural Fragmentation</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-annexes" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Annexes</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-annexes">
<li><a class="dropdown-item" href="../articles/GGIRParameters.html">GGIR Parameters</a></li>
    <li><a class="dropdown-item" href="../articles/GGIRoutput.html">GGIR Output</a></li>
    <li><a class="dropdown-item" href="../articles/readmyacccsv.html">Reading csv files with raw data</a></li>
    <li><a class="dropdown-item" href="../articles/ExternalFunction.html">Embedding external functions in GGIR</a></li>
    <li><a class="dropdown-item" href="../articles/CutPoints.html">Published cut-points and how to use them</a></li>
    <li><a class="dropdown-item" href="../articles/TutorialDaySegmentAnalyses.html">Day-segment analyses</a></li>
    <li><a class="dropdown-item" href="../articles/HouseHoldCoanalysis.html">Household co-analysis</a></li>
    <li><a class="dropdown-item" href="../articles/Cookbook.html">Cookbook</a></li>
    <li><a class="dropdown-item" href="../articles/DateTimeFormatsInR.html">Date and Time formats in R</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../articles/chapter0_Installation.html">Installation</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/chapter0_GetStarted.html">Get started</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news">
<li><h6 class="dropdown-header" data-toc-skip>Releases</h6></li>
    <li><a class="external-link dropdown-item" href="https://www.accelting.com/ggir-release-3-2-0/">Version 3.2-0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.accelting.com/ggir-release-3-1-5/">Version 3.1-5</a></li>
    <li><a class="external-link dropdown-item" href="https://www.accelting.com/ggir-release-3-1-0/">Version 3.1-0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.accelting.com/ggir-release-3-0-0/">Version 3.0-0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.accelting.com/ggir-release-2-9-0/">Version 2.9-0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.accelting.com/ggir-release-2-8-0/">Version 2.8-0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.accelting.com/ggir-release-2-7-1/">Version 2.7-1</a></li>
    <li><a class="external-link dropdown-item" href="https://www.accelting.com/ggir-release-2-6-0/">Version 2.6-0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.accelting.com/ggir-release-2-5-0/">Version 2.5-0</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../articles/chapter0_Contributing.html">Contributing</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/chapter0_Support.html">Need help?</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/wadpac/GGIR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>8. Sleep Fundamentals: Sustained Inactivity Bout Detection (SIB)</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/wadpac/GGIR/blob/HEAD/vignettes/chapter8_SleepFundamentalsSibs.Rmd" class="external-link"><code>vignettes/chapter8_SleepFundamentalsSibs.Rmd</code></a></small>
      <div class="d-none name"><code>chapter8_SleepFundamentalsSibs.Rmd</code></div>
    </div>

    
    
<p>Sleep analysis in GGIR comes at three stages:</p>
<ol style="list-style-type: decimal">
<li><p>The discrimination of sustained inactivity and wakefulness
periods, discussed in this chapter.</p></li>
<li><p>Identification of time windows that guide the eventual sleep
detection, as discussed in the next chapter.</p></li>
<li><p>Assess overlap between the windows identified in step 1 and 2,
which we use to define the Sleep Period Time window (SPT) or the time in
bed window (TimeInBed) as discussed in chapter 10.</p></li>
</ol>
<p>The term “sleep” is somewhat controversial in the context of
accelerometry, because accelerometers can only capture lack of movement,
while sleep is not formally defined by a lack of movement. To
acknowledge this, GGIR refers to these classified ‘sleep’ periods as
<strong>sustained inactivity bouts abbreviated as SIB</strong>. However,
we use the term sleep in GGIR to denote the broader topic of describing
the main resting period in the day.</p>
<p>Most SIB detection algorithms are designed for wrist-worn data. No
evidence exists that they are informative for other wear locations.
However, if your main interest is in daytime behaviour and not in sleep,
you can still use them. In that case set parameter
<code>relyonguider = TRUE</code> in combination with any of the SIB
algorithms described below. GGIR will then rely on the guider (discussed
in next chapter) to define the Sleep Period Time window (this is, the
main episode of sleep in the day) and by that the waking hours of the
day. The sleep analysis based on the SIB detection may not be
informative though and best ignored.</p>
<p>GGIR offers the user the choice to identify SIB period with the
following algorithms:</p>
<div class="section level2">
<h2 id="sib-vanhees2015">SIB: vanHees2015<a class="anchor" aria-label="anchor" href="#sib-vanhees2015"></a>
</h2>
<p>This algorithm looks for the periods of time where the z-angle does
not change by more than 5 degrees for at least 5 minutes. This algorithm
was proposed in a <a href="https://doi.org/10.1371/journal.pone.0142533" class="external-link">2015 article</a>.
The idea behind the algorithm is that it is a more interpretable
heuristic compared with the conventional approaches that use the
magnitude of acceleration to distinguish sustained inactivity bouts.
There is no reason to assume that <code>vanHees2015</code> is a better
or worse reflection of sleep, the advancement is purely intended to be
in terms of interpretability. The <code>vanHees2015</code> algorithm is
the default. The values 5 and 5 in the algorithm can be modified with
parameters <code>anglethreshold</code> and <code>timethreshold</code>,
but we currently see no basis to recommend doing this and advise
sticking to default values.</p>
</div>
<div class="section level2">
<h2 id="sib-notworn-experimental">SIB: NotWorn (EXPERIMENTAL)<a class="anchor" aria-label="anchor" href="#sib-notworn-experimental"></a>
</h2>
<p><strong>Disclaimer: The status of this SIB algorithm is experimental
because it has not been described and evaluated in a peer-reviewed
publication yet. This means revisions to the algorithm can be expected
as the algorithm matures.</strong></p>
<p>The algorithms named “NotWorn” for both sib and guider (next chapter)
are designed for studies where the instruction is to not wear the
accelerometer during the night. It should be obvious that this does not
facilitate any meaningful sleep analysis. Nonetheless we need a crude
estimate of night time versus day time in order for GGIR part 5 to
characterise day time behaviours.</p>
<p>If this is the case for your dataset then use guider setting
<code>HASPT.algo = "NotWorn"</code> as discussed in the next chapter.
Further, we recommend combining the using of ‘“NotWorn”’ with:
<code>do.imp = FALSE</code>, <code>HASPT.ignore.invalid = NA</code>, and
<code>ignorenonwear = FALSE</code>.</p>
<p>The detection of sib periods is based on the acceleration metric as
defined with parameter <code>acc.metric</code>.</p>
<div class="section level3">
<h3 id="combined-with-count-acceleration-metrics">Combined with count acceleration metrics<a class="anchor" aria-label="anchor" href="#combined-with-count-acceleration-metrics"></a>
</h3>
<p>If you are using a count accelereration metric then set
<code>HASIB.algo = "NotWorn"</code>. In part 4 the sib will be set equal
to the detected guider window. So, effectively guider and sib algorithm
are identical in this case.</p>
</div>
<div class="section level3">
<h3 id="combined-with-gravitational-unit-acceleration-metrics">Combined with gravitational unit acceleration metrics<a class="anchor" aria-label="anchor" href="#combined-with-gravitational-unit-acceleration-metrics"></a>
</h3>
<p>If you are using an acceleration metrics the expresses acceleration
in gravitational units then set <code>HASIB.algo</code> as you would do
if the accelerometer was expected to be worn and specify a second guider
for parameter <code>HASPT.algo</code> as discussed int he next chapter,
e.g. <code>HASPT.algo = c("NotWorn", "HDCZA)"</code>. In this way GGIR
will first search for long non-wear periods as indicator of sleep and
use those to define the sleep window but if those are not found it will
fall back on the sib-algortihm as specified with
<code>HASIB.algo</code>, e.g. <code>"vanHees2015"</code>.</p>
</div>
</div>
<div class="section level2">
<h2 id="sib-count-based-algorithms-experimental">SIB: Count based algorithms (EXPERIMENTAL)<a class="anchor" aria-label="anchor" href="#sib-count-based-algorithms-experimental"></a>
</h2>
<p>Accelerometers have been used for sleep research since the 1990s.
However, they did not store their data in gravitational units at
sub-second level as we use nowadays. Instead they stored their data in
30 or 60 second epoch aggregates. Although these aggregates are referred
to as counts by many manufacturers the calculation of counts differs by
manufacturer.</p>
<p><strong>Externally derived epoch data</strong></p>
<p>If you use GGIR with not raw but externally derived epoch data we can
only assume that the count calculation is consistent with how counts
were calculated when the sleep detection algortihm was proposed.</p>
<p><strong>Raw data</strong></p>
<p>If you apply GGIR to raw data it is critical you select a suitable
count metric. We have attempted to facilitate several sleep detection
algorithms from the literature in that period such as "Sadeh1994",
"ColeKripke1992", "Galland2012", and "Oakley1997". A problem with all
these algorithms is that the preprocessing done to generate the counts
is insufficiently described in the literature. For the zero-crossing
count as used by Sadeh1994 and ColeKripke1992 an attempt has been made
to collect as much information as could be found and made an educated
guess on the missing information. The zero-crossing counts are discussed
in the chapter 4 about acceleration metrics. Note that it is uncertain
whether the Y-axis direction on modern accelerometers matches the
direction of the Y-axis in literature because for old studies the
direction of Y-axis was to our knowledge never clarified.</p>
<p>The Galland2012 and Oakley1997 are based on the specific count
calculated as used by Oakley and collagues and re-used in all Actiwatch
and Actiwatch-derived products such as MotionWatch8, Philips Health
Band. From what I have been able to retrieve from product documentation
(source The MotionWatch User guide: Issue 1.4.20b, page 30) the count is
calculated on-board the device in four stages:</p>
<ol style="list-style-type: decimal">
<li>The channel perpendicular to the watch is separated and subjected to
the bandwidth filtering specified above (3-11Hz).</li>
<li>The peak acceleration (either positive or negative) during each
second is recorded.</li>
<li>This is compared to a minimum “not moving” threshold of
approximately 0.1g. Although, in other places this is referred to as
0.05g. Values below this threshold are ignored to simplify the final
activity graph.</li>
<li>The result from each second is summed over the epoch and scaled to
produce a standard result in controlled jig testing. This value is then
recorded as the MotionWatch count for the epoch.</li>
</ol>
<p>Currently, GGIR does not attempt to imitate this count calculation.
Instead Oakley1997 can only be applied when the GGIR input data is from
any of the devices as listed above.</p>
<p>Once counts are read or calculated we can use the following SIB
algorithms.</p>
<div class="section level3">
<h3 id="sadeh1994">Sadeh1994<a class="anchor" aria-label="anchor" href="#sadeh1994"></a>
</h3>
<p>The algorithm proposed by Sadeh et al. <a href="https://doi.org/10.1093/sleep/17.3.201" class="external-link">link</a>. To use this set
parameter <code>HASIB.algo = "Sadeh1994"</code> and argument
<code>Sadeh_axis = "Y"</code> to indicate that the algorithm should use
the Y-axis of the sensor.</p>
</div>
<div class="section level3">
<h3 id="galland2012">Galland2012<a class="anchor" aria-label="anchor" href="#galland2012"></a>
</h3>
<p>The algorithm proposed by Galland et al. <a href="http://dx.doi.org/10.1016/j.sleep.2012.01.018" class="external-link">link</a>. To use
our implementation of the Galland2012 algorithm specify parameter
<code>HASIB.algo = "Galland2012"</code>. Further, set
<code>Sadeh_axis = "Y"</code> to specify that the algorithm should use
the Y-axis.</p>
</div>
<div class="section level3">
<h3 id="colekripke1992">ColeKripke1992<a class="anchor" aria-label="anchor" href="#colekripke1992"></a>
</h3>
<p>The algorithm proposed by Cole et al. <a href="https://doi.org/10.1093/sleep/15.5.461" class="external-link">link</a>, more
specifically GGIR uses the algortihm proposed in the paper for 10-second
non-overlapping epochs with counts expressed average per minute. We skip
the re-scoring steps as the paper showed marginal added value of this
added complexity. To use the GGIR implementation of this algortihm,
specify parameters <code>HASIB.algo = "ColeKripke1992"</code> and
<code>Sadeh_axis = "Y"</code> to indicate that the algorithm should use
the Y-axis of the sensor.</p>
</div>
<div class="section level3">
<h3 id="oakley1997">Oakley1997<a class="anchor" aria-label="anchor" href="#oakley1997"></a>
</h3>
<div class="section level4">
<h4 id="algorithm-origin">Algorithm origin<a class="anchor" aria-label="anchor" href="#algorithm-origin"></a>
</h4>
<p>This algorithm is often referred to as Oakley et al. 1997. The
reference gives the impression that there is an academic publication by
Oakley from 1997, but actually this refers to “Oakley et al. Validation
with Polysomnography of the Sleepwatch Sleep/Wake Scoring Algorithm used
by the Actiwatch Activity Monitoring System” which is a two page pdf
document presenting an evaluation of the algorithm but not the actual
algorithm. Further, it is unclear in what context it was written, it may
have been a short conference proceeding but this is not clarified.</p>
<p>The algorithm was originally created by Dr. Oakley and Mr Gary
Ungless. Cambridge Neurotechnology was co-founded by Dr Nigel Oakley.
Additional validation work was performed by the company MiniMitter who
licensed the Actiwatch technology from Cambridge Neurotechnology until
2008 when MiniMitter was purchased by Respironics and subsequently
Philips who also bought all rights to Actiwatch at that time. The same
algorithms have hence been used by Cambridge Neurotechnology, Philips
and by CamNtech.</p>
<p>These manufacturers have produced actigraphy devices such as Philips
Health Band, Actiwatch, MotionWatch8, and Actical.</p>
</div>
<div class="section level4">
<h4 id="algorithm">Algorithm<a class="anchor" aria-label="anchor" href="#algorithm"></a>
</h4>
<p>The algorithm takes as input epoch-by-epoch count values. The
algorithm itself has been communicated by the manufacturers via product
information documents. For example, Cambridge Neurotechnologiesy shares
the algorithm via a pdf titled “Information bulletin no.3 sleep
algorithms” (please contact manufacturer for copy), and for Actiwatch by
Respironics it was described in “Actiwatch Communication and Sleep
Analysis Software: Instruction Manual Appendix A” <a href="https://johnawinegarden.files.wordpress.com/2015/03/actiwatchsoftware.pdf" class="external-link">link
to pdf</a>.</p>
<p>In short, the algorithm uses a weighted sum of the count value of the
current and surrounding epochs, where weights and number of epochs to be
used are dependent on the epoch length. The algorithm facilitates 15,
30, 60, and 120 second epoch lengths. In GGIR we only facilitate 15, 30
and 60.</p>
<p>The Oakley algorithm uses a threshold of 20, 40 or 80, which is
documented <a href="https://wadpac.github.io/GGIR/articles/GGIRParameters.html#oakley_threshold">here</a>.</p>
<p>To use the GGIR implementation of this algorithm, specify parameter
<code>HASIB.algo = "Oakley1997"</code>.</p>
</div>
</div>
<div class="section level3">
<h3 id="data">Data<a class="anchor" aria-label="anchor" href="#data"></a>
</h3>
<p>Some data formats come with a sleep classification, which can be used
by setting parameter <code>HASIB.algo = "data"</code>. This applies
to:</p>
<ul>
<li>Fitbit</li>
<li>Philips Health Band</li>
<li>Actiwatch and Motionwatch</li>
</ul>
<p>If no sleep classification can be found in the data GGIR will fall
back on the second value of <code>HASIB.algo</code> parameter. For
example, <code>HASIB.algo = c("data", "Oakley1997")</code>.</p>
<p>However, if <code>HASIB.algo</code> is specified to one of the before
mentioned algorithms, GGIR will attempt to apply those algorithms to the
data and will directly ignore the sleep classification in the data.</p>
</div>
</div>
<div class="section level2">
<h2 id="dealing-with-expected-or-detected-nonwear-time-segments">Dealing with expected or detected nonwear time segments<a class="anchor" aria-label="anchor" href="#dealing-with-expected-or-detected-nonwear-time-segments"></a>
</h2>
<p>Depending on study protocol we may want to interpret invalid data
(typically non-wear) differently. When you set parameter
<code>ignorenonwear=TRUE</code> (default) it will ignore any non-wear
period for the SIB detection. This is useful to prevent nonwear episodes
before going to bed or after waking up from contributing to sleep.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Vincent T van Hees, Jairo H Migueles, Medical Research Council UK, Accelting, French National Research Agency.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
